<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Mobile-first design */
        @media (max-width: 768px) {
            .mobile-container {
                padding: 8px;
                margin-top: 60px;
            }
            
            .mobile-card {
                background: white;
                border-radius: 16px;
                padding: 16px;
                margin-bottom: 16px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                border: 1px solid #e5e7eb;
            }
            
            .mobile-form-field {
                margin-bottom: 16px;
            }
            
            .mobile-label {
                display: flex;
                align-items: center;
                gap: 8px;
                font-size: 14px;
                font-weight: 600;
                color: #374151;
                margin-bottom: 8px;
            }
            
            .mobile-input {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid #e5e7eb;
                border-radius: 12px;
                font-size: 16px;
                background: white;
                transition: all 0.2s ease;
                min-height: 48px;
            }
            
            .mobile-input:focus {
                outline: none;
                border-color: #3b82f6;
                box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
            }
            
            .mobile-select {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid #e5e7eb;
                border-radius: 12px;
                font-size: 16px;
                background: white;
                min-height: 48px;
                appearance: none;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
                background-position: right 12px center;
                background-repeat: no-repeat;
                background-size: 16px;
                padding-right: 40px;
            }
            
            .mobile-button {
                width: 100%;
                padding: 16px;
                border: none;
                border-radius: 12px;
                font-size: 16px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s ease;
                min-height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            }
            
            .mobile-button-primary {
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                color: white;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            }
            
            .mobile-button-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
            }
            
            .mobile-button-secondary {
                background: #f3f4f6;
                color: #374151;
                border: 2px solid #e5e7eb;
            }
            
            .mobile-button-success {
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                color: white;
                box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            }
            
            .mobile-button-danger {
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                color: white;
                box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
            }
            
            .mobile-item-card {
                background: #f8fafc;
                border: 2px solid #e2e8f0;
                border-radius: 12px;
                padding: 16px;
                margin-bottom: 12px;
            }
            
            .mobile-item-header {
                display: flex;
                justify-content: between;
                align-items: center;
                margin-bottom: 12px;
            }
            
            .mobile-item-number {
                width: 32px;
                height: 32px;
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                color: white;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 14px;
                font-weight: bold;
                margin-right: 12px;
            }
            
            .mobile-emoji-picker {
                display: grid;
                grid-template-columns: repeat(8, 1fr);
                gap: 8px;
                max-height: 200px;
                overflow-y: auto;
                padding: 8px;
                background: #f9fafb;
                border-radius: 8px;
                margin-top: 8px;
            }
            
            .mobile-emoji-btn {
                width: 40px;
                height: 40px;
                border: none;
                background: white;
                border-radius: 8px;
                font-size: 20px;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            
            .mobile-emoji-btn:hover {
                transform: scale(1.1);
                box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            }
            
            .mobile-summary-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
                margin-bottom: 20px;
            }
            
            .mobile-summary-card {
                background: white;
                padding: 16px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }
            
            .mobile-summary-icon {
                font-size: 24px;
                margin-bottom: 8px;
            }
            
            .mobile-summary-amount {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 4px;
            }
            
            .mobile-summary-label {
                font-size: 12px;
                color: #6b7280;
            }
            
            .mobile-record-card {
                background: white;
                border-radius: 12px;
                padding: 16px;
                margin-bottom: 12px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                border-left: 4px solid transparent;
            }
            
            .mobile-record-card.income {
                border-left-color: #10b981;
            }
            
            .mobile-record-card.expense {
                border-left-color: #ef4444;
            }
            
            .mobile-record-header {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 12px;
            }
            
            .mobile-record-date {
                font-size: 12px;
                color: #6b7280;
                background: #f3f4f6;
                padding: 4px 8px;
                border-radius: 6px;
            }
            
            .mobile-record-amount {
                font-size: 18px;
                font-weight: bold;
            }
            
            .mobile-record-amount.income {
                color: #10b981;
            }
            
            .mobile-record-amount.expense {
                color: #ef4444;
            }
            
            .mobile-record-description {
                font-size: 16px;
                font-weight: 600;
                color: #111827;
                margin-bottom: 8px;
            }
            
            .mobile-record-meta {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 8px;
                margin-bottom: 12px;
            }
            
            .mobile-record-meta-item {
                font-size: 12px;
                color: #6b7280;
                background: #f9fafb;
                padding: 6px 8px;
                border-radius: 6px;
            }
            
            .mobile-record-actions {
                display: flex;
                gap: 8px;
            }
            
            .mobile-record-btn {
                flex: 1;
                padding: 8px 12px;
                border: none;
                border-radius: 8px;
                font-size: 12px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s ease;
            }
            
            .mobile-record-btn-edit {
                background: #3b82f6;
                color: white;
            }
            
            .mobile-record-btn-delete {
                background: #ef4444;
                color: white;
            }
            
            .mobile-floating-menu {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1000;
            }
            
            .mobile-fab {
                width: 56px;
                height: 56px;
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                color: white;
                border: none;
                border-radius: 50%;
                font-size: 24px;
                cursor: pointer;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
                transition: all 0.2s ease;
            }
            
            .mobile-fab:hover {
                transform: scale(1.1);
                box-shadow: 0 6px 16px rgba(59, 130, 246, 0.5);
            }
            
            .mobile-controls {
                display: flex;
                gap: 8px;
                align-items: center;
            }
            
            .mobile-control-btn {
                width: 36px;
                height: 36px;
                background: #f3f4f6;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 16px;
                cursor: pointer;
                transition: all 0.2s ease;
            }
            
            .mobile-control-btn:hover {
                background: #e5e7eb;
                transform: scale(1.05);
            }
            
            .mobile-control-btn.increase {
                background: #dcfce7;
                border-color: #22c55e;
                color: #16a34a;
            }
            
            .mobile-control-btn.decrease {
                background: #fee2e2;
                border-color: #ef4444;
                color: #dc2626;
            }
        }
        
        /* Desktop styles */
        @media (min-width: 769px) {
            .mobile-only {
                display: none;
            }
        }
        
        /* Mobile only */
        @media (max-width: 768px) {
            .desktop-only {
                display: none;
            }
            
            .mobile-only {
                display: block;
            }
        }
        
        /* Animations */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Custom scrollbar for mobile */
        @media (max-width: 768px) {
            ::-webkit-scrollbar {
                width: 4px;
            }
            
            ::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            
            ::-webkit-scrollbar-thumb {
                background: #c1c1c1;
                border-radius: 2px;
            }
            
            ::-webkit-scrollbar-thumb:hover {
                background: #a1a1a1;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Mobile Header -->
    <div class="mobile-only fixed top-0 left-0 w-full bg-white shadow-lg z-50">
        <div class="flex items-center justify-between p-4">
            <h1 class="text-xl font-bold text-gray-800">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h1>
            <button id="mobile-menu-btn" class="text-gray-600 hover:text-gray-800 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden bg-white border-t">
            <nav class="py-2">
                <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏≠‡∏ó‡∏µ</a>
                <a href="#" class="block px-4 py-3 bg-green-100 text-green-700 font-medium border-b">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
                <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üéâ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</a>
                <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üìä ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV</a>
                <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
                <a href="#" class="block px-4 py-3 text-red-600 hover:bg-red-50">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </nav>
        </div>
    </div>

    <!-- Desktop Sidebar -->
    <div class="desktop-only fixed top-0 left-0 w-64 h-full bg-white shadow-lg z-40">
        <div class="p-6">
            <h1 class="text-2xl font-bold text-gray-800 mb-8">üìä ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</h1>
            <nav class="space-y-2">
                <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏≠‡∏ó‡∏µ</a>
                <a href="#" class="block px-4 py-3 bg-green-100 text-green-700 font-medium rounded-lg">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
                <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">üéâ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</a>
                <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">üìä ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV</a>
                <a href="#" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <div class="lg:ml-64 mobile-container lg:pt-6 lg:p-6">
        <!-- Mobile Summary Cards -->
        <div class="mobile-only mobile-summary-grid">
            <div class="mobile-summary-card">
                <div class="mobile-summary-icon">üí∞</div>
                <div class="mobile-summary-amount text-green-600">15,000.00</div>
                <div class="mobile-summary-label">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</div>
            </div>
            <div class="mobile-summary-card">
                <div class="mobile-summary-icon">üí∏</div>
                <div class="mobile-summary-amount text-red-600">8,500.00</div>
                <div class="mobile-summary-label">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</div>
            </div>
            <div class="mobile-summary-card">
                <div class="mobile-summary-icon">üìä</div>
                <div class="mobile-summary-amount text-blue-600">6,500.00</div>
                <div class="mobile-summary-label">‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
            </div>
            <div class="mobile-summary-card">
                <div class="mobile-summary-icon">üìù</div>
                <div class="mobile-summary-amount text-gray-600">24</div>
                <div class="mobile-summary-label">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
            </div>
        </div>

        <!-- Add Transaction Form -->
        <div class="mobile-card fade-in">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>‚ûï</span>
                <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</span>
            </h2>
            
            <form id="transaction-form" class="space-y-4">
                <!-- Date -->
                <div class="mobile-form-field">
                    <label class="mobile-label">
                        <span>üìÖ</span>
                        <span>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</span>
                    </label>
                    <input type="date" id="date" class="mobile-input" required>
                </div>

                <!-- Transaction Type -->
                <div class="mobile-form-field">
                    <label class="mobile-label">
                        <span>üìä</span>
                        <span>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                    </label>
                    <select id="transaction-type" class="mobile-select" required>
                        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ --</option>
                        <option value="income">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
                        <option value="expense">üí∏ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
                    </select>
                </div>

                <!-- Main Category -->
                <div class="mobile-form-field">
                    <label class="mobile-label">
                        <span>üè∑Ô∏è</span>
                        <span>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å</span>
                    </label>
                    <div class="flex gap-2">
                        <select id="main-category" class="mobile-select" required>
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å --</option>
                        </select>
                        <button type="button" id="add-main-category-btn" class="mobile-button-secondary" style="width: 48px; min-width: 48px;">‚ûï</button>
                    </div>
                </div>

                <!-- Sub Category -->
                <div class="mobile-form-field">
                    <label class="mobile-label">
                        <span>üìÇ</span>
                        <span>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢</span>
                    </label>
                    <div class="flex gap-2">
                        <select id="sub-category" class="mobile-select" required>
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢ --</option>
                        </select>
                        <button type="button" id="add-sub-category-btn" class="mobile-button-secondary" style="width: 48px; min-width: 48px;">‚ûï</button>
                    </div>
                </div>

                <!-- Income Amount (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö) -->
                <div id="income-section" class="mobile-form-field hidden">
                    <label class="mobile-label">
                        <span>üí∞</span>
                        <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</span>
                    </label>
                    <input type="number" id="income-amount" class="mobile-input" step="0.01" min="0" placeholder="0.00">
                </div>

                <!-- Items Section (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢) -->
                <div id="items-section" class="mobile-form-field hidden">
                    <label class="mobile-label">
                        <span>üõí</span>
                        <span>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    </label>
                    
                    <!-- Selected Items -->
                    <div id="selected-items-container" class="mb-4">
                        <div id="selected-items"></div>
                    </div>

                    <!-- Add Item Form -->
                    <div class="bg-gray-50 rounded-12 p-4 border-2 border-dashed border-gray-300">
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
                            <span>‚ûï</span>
                            <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</span>
                        </h4>
                        
                        <div class="space-y-3">
                            <!-- Item Name & Emoji -->
                            <div>
                                <label class="mobile-label">
                                    <span id="selected-emoji">üòä</span>
                                    <span>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                                </label>
                                <div class="flex gap-2">
                                    <input type="text" id="item-name" class="mobile-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...">
                                    <button type="button" id="emoji-picker-btn" class="mobile-button-secondary" style="width: 48px; min-width: 48px;">
                                        <span id="emoji-display">üòä</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Price & Quantity -->
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="mobile-label">
                                        <span>üí∞</span>
                                        <span>‡∏£‡∏≤‡∏Ñ‡∏≤</span>
                                    </label>
                                    <input type="number" id="item-price" class="mobile-input" step="0.01" min="0" placeholder="0.00">
                                </div>
                                <div>
                                    <label class="mobile-label">
                                        <span>üìä</span>
                                        <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</span>
                                    </label>
                                    <input type="number" id="item-quantity" class="mobile-input" min="1" value="1">
                                </div>
                            </div>

                            <!-- Tag Selection -->
                            <div>
                                <label class="mobile-label">
                                    <span>üè∑Ô∏è</span>
                                    <span>‡πÅ‡∏ó‡πá‡∏Å</span>
                                </label>
                                <select id="item-tag" class="mobile-select">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ó‡πá‡∏Å</option>
                                    <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£">üçΩÔ∏è ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                                    <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">ü•§ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
                                    <option value="‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ">üõçÔ∏è ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ</option>
                                    <option value="‡∏¢‡∏≤">üíä ‡∏¢‡∏≤</option>
                                    <option value="‡∏Ç‡∏ô‡∏°">üç™ ‡∏Ç‡∏ô‡∏°</option>
                                    <option value="‡∏ú‡∏•‡πÑ‡∏°‡πâ">üçé ‡∏ú‡∏•‡πÑ‡∏°‡πâ</option>
                                    <option value="‡∏ú‡∏±‡∏Å">ü•¨ ‡∏ú‡∏±‡∏Å</option>
                                    <option value="‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå">ü•© ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå</option>
                                    <option value="‡∏ô‡∏°">ü•õ ‡∏ô‡∏°</option>
                                    <option value="‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á">üçû ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á</option>
                                </select>
                            </div>

                            <!-- Emoji Picker -->
                            <div id="emoji-picker" class="hidden">
                                <div class="mobile-emoji-picker" id="emoji-grid"></div>
                                <button type="button" onclick="closeEmojiPicker()" class="mobile-button-secondary mt-2">‡∏õ‡∏¥‡∏î</button>
                            </div>

                            <!-- Add Item Button -->
                            <button type="button" onclick="addItem()" class="mobile-button mobile-button-success">
                                <span>‚ûï</span>
                                <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                            </button>
                        </div>
                    </div>

                    <!-- Items Summary -->
                    <div class="bg-blue-50 rounded-12 p-4 mt-4 border border-blue-200">
                        <div class="flex justify-between items-center">
                            <span class="font-semibold text-blue-800">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
                            <span id="total-items" class="text-blue-600">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                        </div>
                        <div class="flex justify-between items-center mt-1">
                            <span class="font-semibold text-blue-800">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
                            <span id="total-amount" class="text-lg font-bold text-blue-600">0.00 ‡∏ö‡∏≤‡∏ó</span>
                        </div>
                    </div>
                </div>

                <!-- Vendor (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢) -->
                <div id="vendor-section" class="mobile-form-field hidden">
                    <label class="mobile-label">
                        <span>üè™</span>
                        <span>‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    </label>
                    <div class="flex gap-2">
                        <select id="vendor" class="mobile-select">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ --</option>
                            <option value="‡∏£‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡∏¢‡∏à‡πà‡∏≠‡∏¢">‡∏£‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡∏¢‡∏à‡πà‡∏≠‡∏¢</option>
                            <option value="‡∏£‡πâ‡∏≤‡∏ô‡∏ú‡∏±‡∏Å">‡∏£‡πâ‡∏≤‡∏ô‡∏ú‡∏±‡∏Å</option>
                            <option value="‡πÄ‡∏à‡πâ‡∏ô‡∏±‡∏ô">‡πÄ‡∏à‡πâ‡∏ô‡∏±‡∏ô</option>
                            <option value="7-Eleven">7-Eleven</option>
                            <option value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</option>
                        </select>
                        <button type="button" id="add-vendor-btn" class="mobile-button-secondary" style="width: 48px; min-width: 48px;">‚ûï</button>
                    </div>
                </div>

                <!-- Description -->
                <div class="mobile-form-field">
                    <label class="mobile-label">
                        <span>üìù</span>
                        <span>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span>
                    </label>
                    <input type="text" id="description" class="mobile-input" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...">
                </div>

                <!-- Submit Button -->
                <button type="submit" class="mobile-button mobile-button-primary">
                    <span>üíæ</span>
                    <span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                </button>
            </form>
        </div>

        <!-- Month Selection -->
        <div class="mobile-card">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üìÖ</span>
                <span>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
            </h2>
            
            <div class="mobile-form-field">
                <select id="month-select" class="mobile-select" onchange="changeMonth(this.value)">
                    <option value="2025-01">‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2025</option>
                    <option value="2024-12">‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2024</option>
                    <option value="2024-11">‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2024</option>
                </select>
            </div>
            
            <!-- Export Buttons -->
            <div class="grid grid-cols-2 gap-2 mt-4">
                <button onclick="exportData('all')" class="mobile-button-secondary text-sm">üìÑ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                <button onclick="exportData('income')" class="mobile-button-secondary text-sm">üí∞ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</button>
                <button onclick="exportData('expense')" class="mobile-button-secondary text-sm">üí∏ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</button>
                <button onclick="showMonthlySummary()" class="mobile-button-secondary text-sm">üìã ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
            </div>
        </div>

        <!-- Records List -->
        <div class="mobile-card">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üìä</span>
                <span>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
            </h2>
            
            <div id="records-container">
                <!-- Sample Records -->
                <div class="mobile-record-card income fade-in">
                    <div class="mobile-record-header">
                        <div class="mobile-record-date">üìÖ 2025-01-20</div>
                        <div class="mobile-record-amount income">üí∞ 15,000.00</div>
                    </div>
                    <div class="mobile-record-description">‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥</div>
                    <div class="mobile-record-meta">
                        <div class="mobile-record-meta-item">üè∑Ô∏è ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        <div class="mobile-record-meta-item">üìÇ ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥</div>
                    </div>
                    <div class="mobile-record-actions">
                        <button class="mobile-record-btn mobile-record-btn-edit">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button class="mobile-record-btn mobile-record-btn-delete" onclick="return confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')">üóëÔ∏è ‡∏•‡∏ö</button>
                    </div>
                </div>

                <div class="mobile-record-card expense fade-in">
                    <div class="mobile-record-header">
                        <div class="mobile-record-date">üìÖ 2025-01-19</div>
                        <div class="mobile-record-amount expense">üí∏ 350.00</div>
                    </div>
                    <div class="mobile-record-description">‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î, ‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°, ‡πÑ‡∏Ç‡πà‡πÄ‡∏à‡∏µ‡∏¢‡∏ß</div>
                    <div class="mobile-record-meta">
                        <div class="mobile-record-meta-item">üè™ ‡∏£‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡∏¢‡∏à‡πà‡∏≠‡∏¢</div>
                        <div class="mobile-record-meta-item">üè∑Ô∏è ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</div>
                        <div class="mobile-record-meta-item">üìÇ ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô</div>
                        <div class="mobile-record-meta-item">üìä 3 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
                    </div>
                    <div class="mobile-record-actions">
                        <button class="mobile-record-btn mobile-record-btn-edit">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button class="mobile-record-btn mobile-record-btn-delete" onclick="return confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')">üóëÔ∏è ‡∏•‡∏ö</button>
                    </div>
                </div>

                <div class="mobile-record-card expense fade-in">
                    <div class="mobile-record-header">
                        <div class="mobile-record-date">üìÖ 2025-01-18</div>
                        <div class="mobile-record-amount expense">üí∏ 150.00</div>
                    </div>
                    <div class="mobile-record-description">‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°, ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á</div>
                    <div class="mobile-record-meta">
                        <div class="mobile-record-meta-item">üè™ 7-Eleven</div>
                        <div class="mobile-record-meta-item">üè∑Ô∏è ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ</div>
                        <div class="mobile-record-meta-item">üìÇ ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</div>
                        <div class="mobile-record-meta-item">üìä 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
                    </div>
                    <div class="mobile-record-actions">
                        <button class="mobile-record-btn mobile-record-btn-edit">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button class="mobile-record-btn mobile-record-btn-delete" onclick="return confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')">üóëÔ∏è ‡∏•‡∏ö</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Desktop Table (Hidden on Mobile) -->
        <div class="desktop-only bg-white rounded-lg shadow-md overflow-hidden">
            <div class="p-6 border-b">
                <h2 class="text-xl font-semibold text-gray-800">üìä ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
                            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b hover:bg-gray-50">
                            <td class="px-6 py-4">2025-01-20</td>
                            <td class="px-6 py-4">‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥</td>
                            <td class="px-6 py-4 text-green-600 font-bold">15,000.00</td>
                            <td class="px-6 py-4">
                                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</span>
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex gap-2">
                                    <button class="bg-blue-500 text-white px-3 py-1 rounded text-sm">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                                    <button class="bg-red-500 text-white px-3 py-1 rounded text-sm">‡∏•‡∏ö</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Floating Action Button (Mobile Only) -->
    <div class="mobile-only mobile-floating-menu">
        <button class="mobile-fab" onclick="scrollToTop()">
            ‚¨ÜÔ∏è
        </button>
    </div>

    <script>
        // Global Variables
        let selectedItems = [];
        let itemCounter = 0;
        let currentEmoji = 'üòä';
        
        // Category Data
        const categoryData = {
            income: {
                '‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô': ['‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥', '‡πÇ‡∏ö‡∏ô‡∏±‡∏™', '‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤', '‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô'],
                '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏£‡∏¥‡∏°': ['‡∏á‡∏≤‡∏ô‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå', '‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå', '‡∏£‡∏±‡∏ö‡∏à‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'],
                '‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°': ['‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å', '‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•', '‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏†‡∏≤‡∏©‡∏µ'],
                '‡∏≠‡∏∑‡πà‡∏ô‡πÜ': ['‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç', '‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏π‡πâ', '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÜ']
            },
            expense: {
                '‡∏≠‡∏≤‡∏´‡∏≤‡∏£': ['‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤', '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô', '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏¢‡πá‡∏ô', '‡∏Ç‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°'],
                '‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á': ['‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå', '‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤', '‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà', '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏£‡∏ñ', '‡∏Ñ‡πà‡∏≤‡∏à‡∏≠‡∏î‡∏£‡∏ñ'],
                '‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢': ['‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤', '‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥', '‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü', '‡∏Ñ‡πà‡∏≤‡πÅ‡∏Å‡πä‡∏™', '‡∏Ñ‡πà‡∏≤‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï'],
                '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û': ['‡∏¢‡∏≤', '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û', '‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™', '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏™‡∏£‡∏¥‡∏°'],
                '‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤': ['‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠', '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå'],
                '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á': ['‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á', '‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á', '‡πÄ‡∏Å‡∏°', '‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß'],
                '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤': ['‡πÄ‡∏™‡∏∑‡πâ‡∏≠', '‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á', '‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤', '‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö'],
                '‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ': ['‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á', '‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô', '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå'],
                '‡∏≠‡∏∑‡πà‡∏ô‡πÜ': ['‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°', '‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç', '‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ', '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏∑‡πà‡∏ô‡πÜ']
            }
        };
        
        // Emoji Data by Tag
        const emojiData = {
            '‡∏≠‡∏≤‡∏´‡∏≤‡∏£': ['üçΩÔ∏è', 'üçú', 'üçï', 'üçî', 'üçü', 'üåÆ', 'üåØ', 'ü•™', 'üç±', 'üçõ', 'üçù', 'üç≤', 'ü•ó', 'üç£', 'üç§'],
            '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°': ['ü•§', '‚òï', 'üßÉ', 'üç∫', 'üç∑', 'ü•õ', 'üßã', 'üçπ', 'üíß', 'ü•É', 'üçµ', 'üßä', 'ü•§', 'üç∂', 'üßâ'],
            '‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ': ['üõçÔ∏è', 'üß¥', 'üßª', 'üßΩ', 'üëï', 'üëñ', 'üëü', 'üëú', 'üíÑ', 'ü™û', 'üßº', 'ü™•', 'ü™í', 'üíä', 'üîã'],
            '‡∏¢‡∏≤': ['üíä', 'üè•', 'ü©∫', 'ü©π', 'ü©ª', 'üíâ', 'ü©∏', 'üß¨', 'üî¨', 'üìã', 'üå°Ô∏è', '‚öïÔ∏è', 'üè•', 'üíâ', 'ü©π'],
            '‡∏Ç‡∏ô‡∏°': ['üç™', 'üç©', 'üç∞', 'üßÅ', 'üç¶', 'üç®', 'üç≠', 'üç´', 'üç¨', 'üç°', 'ü•ß', 'üéÇ', 'üßÅ', 'üçÆ', 'üçØ'],
            '‡∏ú‡∏•‡πÑ‡∏°‡πâ': ['üçé', 'üçå', 'üçä', 'üçá', 'üçì', 'üçë', 'ü•≠', 'üçç', 'ü••', 'ü•ù', 'ü´ê', 'üçà', 'üçâ', 'üçã', 'ü´í'],
            '‡∏ú‡∏±‡∏Å': ['ü•¨', 'ü•ï', 'ü•¶', 'ü•í', 'üçÖ', 'üåΩ', 'ü•ë', 'üßÖ', 'üßÑ', 'üå∂Ô∏è', 'ü•î', 'üçÜ', 'ü•¨', 'ü´ë', 'ü•í'],
            '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå': ['ü•©', 'üçó', 'üçñ', 'ü•ì', 'üêü', 'ü¶ê', 'ü¶ë', 'ü¶û', 'ü¶Ä', 'üêî', 'üê∑', 'üêÑ', 'üêü', 'üç§', 'ü¶Ü'],
            '‡∏ô‡∏°': ['ü•õ', 'üßÄ', 'üç¶', 'üç®', 'üßà', 'üçº', 'ü•õ', 'üßÄ', 'ü•õ', 'üßà', 'üç¶', 'üç®', 'ü•õ', 'üßÄ', 'üçº'],
            '‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á': ['üçû', 'ü•ñ', 'ü•®', 'ü•Ø', 'ü•ê', 'ü•™', 'ü•û', 'üßá', 'üçû', 'ü•ñ', 'ü•®', 'ü•Ø', 'ü•ê', 'ü•™', 'üßá']
        };
        
        // Default emojis for tags
        const defaultTagEmojis = {
            '‡∏≠‡∏≤‡∏´‡∏≤‡∏£': 'üçΩÔ∏è',
            '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°': 'ü•§',
            '‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ': 'üõçÔ∏è',
            '‡∏¢‡∏≤': 'üíä',
            '‡∏Ç‡∏ô‡∏°': 'üç™',
            '‡∏ú‡∏•‡πÑ‡∏°‡πâ': 'üçé',
            '‡∏ú‡∏±‡∏Å': 'ü•¨',
            '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå': 'ü•©',
            '‡∏ô‡∏°': 'ü•õ',
            '‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á': 'üçû'
        };

        // DOM Elements
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const transactionType = document.getElementById('transaction-type');
        const mainCategory = document.getElementById('main-category');
        const subCategory = document.getElementById('sub-category');
        const incomeSection = document.getElementById('income-section');
        const itemsSection = document.getElementById('items-section');
        const vendorSection = document.getElementById('vendor-section');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
            
            // Setup event listeners
            setupEventListeners();
            
            // Initialize emoji picker
            setupEmojiPicker();
        });

        function setupEventListeners() {
            // Mobile menu toggle
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!mobileMenuBtn.contains(e.target) && !mobileMenu.contains(e.target)) {
                    mobileMenu.classList.add('hidden');
                }
            });

            // Transaction type change
            transactionType.addEventListener('change', handleTransactionTypeChange);
            
            // Category changes
            mainCategory.addEventListener('change', handleMainCategoryChange);
            subCategory.addEventListener('change', handleSubCategoryChange);
            
            // Tag change for emoji update
            document.getElementById('item-tag').addEventListener('change', handleTagChange);
            
            // Emoji picker button
            document.getElementById('emoji-picker-btn').addEventListener('click', showEmojiPicker);
            
            // Form submission
            document.getElementById('transaction-form').addEventListener('submit', handleFormSubmit);
            
            // Item form enter key handlers
            setupItemFormHandlers();
        }

        function setupItemFormHandlers() {
            const itemName = document.getElementById('item-name');
            const itemPrice = document.getElementById('item-price');
            const itemQuantity = document.getElementById('item-quantity');
            
            itemName.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    itemPrice.focus();
                }
            });
            
            itemPrice.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    itemQuantity.focus();
                }
            });
            
            itemQuantity.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addItem();
                }
            });
        }

        function handleTransactionTypeChange() {
            const type = transactionType.value;
            
            // Clear categories
            mainCategory.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å --</option>';
            subCategory.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢ --</option>';
            
            // Hide all sections first
            incomeSection.classList.add('hidden');
            itemsSection.classList.add('hidden');
            vendorSection.classList.add('hidden');
            
            if (type === 'income') {
                incomeSection.classList.remove('hidden');
                populateCategories('income');
            } else if (type === 'expense') {
                itemsSection.classList.remove('hidden');
                vendorSection.classList.remove('hidden');
                populateCategories('expense');
            }
        }

        function populateCategories(type) {
            const categories = categoryData[type];
            
            Object.keys(categories).forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                mainCategory.appendChild(option);
            });
        }

        function handleMainCategoryChange() {
            const type = transactionType.value;
            const main = mainCategory.value;
            
            subCategory.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢ --</option>';
            
            if (type && main && categoryData[type][main]) {
                categoryData[type][main].forEach(sub => {
                    const option = document.createElement('option');
                    option.value = sub;
                    option.textContent = sub;
                    subCategory.appendChild(option);
                });
            }
        }

        function handleSubCategoryChange() {
            // Auto-generate description for income
            if (transactionType.value === 'income') {
                const main = mainCategory.value;
                const sub = subCategory.value;
                if (main && sub) {
                    document.getElementById('description').value = `${main}: ${sub}`;
                }
            }
        }

        function handleTagChange() {
            const tag = document.getElementById('item-tag').value;
            if (tag && defaultTagEmojis[tag]) {
                currentEmoji = defaultTagEmojis[tag];
                updateEmojiDisplay();
            }
        }

        function setupEmojiPicker() {
            // Initialize with default emoji
            updateEmojiDisplay();
        }

        function showEmojiPicker() {
            const picker = document.getElementById('emoji-picker');
            const grid = document.getElementById('emoji-grid');
            const selectedTag = document.getElementById('item-tag').value;
            
            // Clear previous emojis
            grid.innerHTML = '';
            
            let emojisToShow = [];
            
            if (selectedTag && emojiData[selectedTag]) {
                emojisToShow = emojiData[selectedTag];
            } else {
                // Show all emojis
                emojisToShow = [
                    'üòÄ', 'üòÉ', 'üòÑ', 'üòÅ', 'üòÜ', 'üòÖ', 'üòÇ', 'ü§£', 'üòä', 'üòá',
                    'üôÇ', 'üôÉ', 'üòâ', 'üòå', 'üòç', 'ü•∞', 'üòò', 'üòó', 'üòô', 'üòö',
                    'üòã', 'üòõ', 'üòù', 'üòú', 'ü§™', 'ü§®', 'üßê', 'ü§ì', 'üòé', 'ü§©',
                    'ü•≥', 'üòè', 'üòí', 'üòû', 'üòî', 'üòü', 'üòï', 'üôÅ', '‚òπÔ∏è', 'üò£',
                    'üçΩÔ∏è', 'üçú', 'üçï', 'üçî', 'üçü', 'üåÆ', 'üåØ', 'ü•™', 'üç±', 'üçõ',
                    'ü•§', '‚òï', 'üßÉ', 'üç∫', 'üç∑', 'ü•õ', 'üßã', 'üçπ', 'üíß', 'ü•É',
                    'üõçÔ∏è', 'üß¥', 'üßª', 'üßΩ', 'üëï', 'üëñ', 'üëü', 'üëú', 'üíÑ', 'ü™û',
                    'üíä', 'üè•', 'ü©∫', 'ü©π', 'ü©ª', 'üíâ', 'ü©∏', 'üß¨', 'üî¨', 'üìã',
                    'üç™', 'üç©', 'üç∞', 'üßÅ', 'üç¶', 'üç®', 'üç≠', 'üç´', 'üç¨', 'üç°',
                    'üçé', 'üçå', 'üçä', 'üçá', 'üçì', 'üçë', 'ü•≠', 'üçç', 'ü••', 'ü•ù',
                    'ü•¨', 'ü•ï', 'ü•¶', 'ü•í', 'üçÖ', 'üåΩ', 'ü•ë', 'üßÖ', 'üßÑ', 'üå∂Ô∏è',
                    'ü•©', 'üçó', 'üçñ', 'ü•ì', 'üêü', 'ü¶ê', 'ü¶ë', 'ü¶û', 'ü¶Ä', 'üêî',
                    'ü•õ', 'üßÄ', 'üç¶', 'üç®', 'üßà', 'üçº', 'ü•õ', 'üßÄ', 'ü•õ', 'üßà',
                    'üçû', 'ü•ñ', 'ü•®', 'ü•Ø', 'ü•ê', 'ü•™', 'ü•û', 'üßá', 'üçû', 'ü•ñ'
                ];
            }
            
            emojisToShow.forEach(emoji => {
                const button = document.createElement('button');
                button.className = 'mobile-emoji-btn';
                button.textContent = emoji;
                button.type = 'button';
                button.onclick = () => selectEmoji(emoji);
                grid.appendChild(button);
            });
            
            picker.classList.remove('hidden');
        }

        function selectEmoji(emoji) {
            currentEmoji = emoji;
            updateEmojiDisplay();
            closeEmojiPicker();
        }

        function updateEmojiDisplay() {
            document.getElementById('emoji-display').textContent = currentEmoji;
            document.getElementById('selected-emoji').textContent = currentEmoji;
        }

        function closeEmojiPicker() {
            document.getElementById('emoji-picker').classList.add('hidden');
        }

        function addItem() {
            const name = document.getElementById('item-name').value.trim();
            const price = parseFloat(document.getElementById('item-price').value) || 0;
            const quantity = parseInt(document.getElementById('item-quantity').value) || 1;
            const tag = document.getElementById('item-tag').value;
            
            if (!name) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤');
                document.getElementById('item-name').focus();
                return;
            }
            
            if (price <= 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0');
                document.getElementById('item-price').focus();
                return;
            }
            
            const item = {
                id: ++itemCounter,
                name: name,
                emoji: currentEmoji,
                tag: tag,
                price: price,
                quantity: quantity,
                total: price * quantity
            };
            
            selectedItems.push(item);
            updateItemsDisplay();
            clearItemForm();
            
            // Show success animation
            const addBtn = document.querySelector('button[onclick="addItem()"]');
            addBtn.style.transform = 'scale(1.05)';
            addBtn.innerHTML = '<span>‚úÖ</span><span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß</span>';
            
            setTimeout(() => {
                addBtn.style.transform = 'scale(1)';
                addBtn.innerHTML = '<span>‚ûï</span><span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>';
                document.getElementById('item-name').focus();
            }, 1000);
        }

        function clearItemForm() {
            document.getElementById('item-name').value = '';
            document.getElementById('item-price').value = '';
            document.getElementById('item-quantity').value = '1';
            document.getElementById('item-tag').value = '';
            currentEmoji = 'üòä';
            updateEmojiDisplay();
        }

        function updateItemsDisplay() {
            const container = document.getElementById('selected-items');
            const totalItems = document.getElementById('total-items');
            const totalAmount = document.getElementById('total-amount');
            
            if (selectedItems.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>';
                totalItems.textContent = '0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
                totalAmount.textContent = '0.00 ‡∏ö‡∏≤‡∏ó';
                return;
            }
            
            let total = 0;
            let html = '<div class="space-y-3">';
            
            selectedItems.forEach((item, index) => {
                total += item.total;
                html += `
                    <div class="mobile-item-card fade-in">
                        <div class="mobile-item-header">
                            <div class="flex items-center">
                                <div class="mobile-item-number">${index + 1}</div>
                                <span class="text-xl mr-2">${item.emoji}</span>
                                <span class="font-medium">${item.name}</span>
                            </div>
                            <button onclick="removeItem(${item.id})" class="text-red-500 hover:text-red-700 p-2">
                                üóëÔ∏è
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <div>
                                <label class="mobile-label">üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤</label>
                                <div class="mobile-controls">
                                    <button onclick="decreasePrice(${item.id})" class="mobile-control-btn decrease">‚àí</button>
                                    <input type="number" value="${item.price}" step="0.01" min="0"
                                           onchange="updateItemPrice(${item.id}, this.value)"
                                           class="mobile-input text-center" style="padding: 8px;">
                                    <button onclick="increasePrice(${item.id})" class="mobile-control-btn increase">+</button>
                                </div>
                            </div>
                            <div>
                                <label class="mobile-label">üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
                                <div class="mobile-controls">
                                    <button onclick="decreaseQuantity(${item.id})" class="mobile-control-btn decrease">‚àí</button>
                                    <input type="number" value="${item.quantity}" min="1"
                                           onchange="updateItemQuantity(${item.id}, this.value)"
                                           class="mobile-input text-center" style="padding: 8px;">
                                    <button onclick="increaseQuantity(${item.id})" class="mobile-control-btn increase">+</button>
                                </div>
                            </div>
                        </div>
                        
                        ${item.tag ? `<div class="text-sm text-gray-600 mb-2">üè∑Ô∏è ${item.tag}</div>` : ''}
                        
                        <div class="flex justify-between items-center pt-2 border-t">
                            <span class="text-sm text-gray-600">‡∏£‡∏ß‡∏°:</span>
                            <span class="font-bold text-green-600">${item.total.toFixed(2)} ‡∏ö‡∏≤‡∏ó</span>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
            totalItems.textContent = `${selectedItems.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
            totalAmount.textContent = `${total.toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
            
            // Update description
            updateDescription();
        }

        function updateDescription() {
            const descriptions = selectedItems.map(item => `${item.name} x${item.quantity}`);
            document.getElementById('description').value = descriptions.join(', ');
        }

        function removeItem(itemId) {
            selectedItems = selectedItems.filter(item => item.id !== itemId);
            updateItemsDisplay();
        }

        function updateItemPrice(itemId, newPrice) {
            const item = selectedItems.find(item => item.id === itemId);
            const price = parseFloat(newPrice);
            if (item && !isNaN(price) && price >= 0) {
                item.price = price;
                item.total = item.price * item.quantity;
                updateItemsDisplay();
            }
        }

        function updateItemQuantity(itemId, newQuantity) {
            const item = selectedItems.find(item => item.id === itemId);
            const quantity = parseInt(newQuantity);
            if (item && !isNaN(quantity) && quantity > 0) {
                item.quantity = quantity;
                item.total = item.price * item.quantity;
                updateItemsDisplay();
            }
        }

        function increasePrice(itemId) {
            const item = selectedItems.find(item => item.id === itemId);
            if (item) {
                item.price += 1;
                item.total = item.price * item.quantity;
                updateItemsDisplay();
            }
        }

        function decreasePrice(itemId) {
            const item = selectedItems.find(item => item.id === itemId);
            if (item && item.price > 0) {
                item.price = Math.max(0, item.price - 1);
                item.total = item.price * item.quantity;
                updateItemsDisplay();
            }
        }

        function increaseQuantity(itemId) {
            const item = selectedItems.find(item => item.id === itemId);
            if (item) {
                item.quantity += 1;
                item.total = item.price * item.quantity;
                updateItemsDisplay();
            }
        }

        function decreaseQuantity(itemId) {
            const item = selectedItems.find(item => item.id === itemId);
            if (item && item.quantity > 1) {
                item.quantity = Math.max(1, item.quantity - 1);
                item.total = item.price * item.quantity;
                updateItemsDisplay();
            }
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            
            const type = transactionType.value;
            const main = mainCategory.value;
            const sub = subCategory.value;
            
            if (!type || !main || !sub) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            if (type === 'income') {
                const amount = parseFloat(document.getElementById('income-amount').value);
                if (!amount || amount <= 0) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö');
                    return;
                }
                submitIncomeTransaction(amount);
            } else if (type === 'expense') {
                if (selectedItems.length === 0) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
                    return;
                }
                const vendor = document.getElementById('vendor').value;
                if (!vendor) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤');
                    return;
                }
                submitExpenseTransaction();
            }
        }

        function submitIncomeTransaction(amount) {
            const data = {
                date: document.getElementById('date').value,
                type: 'income',
                mainCategory: mainCategory.value,
                subCategory: subCategory.value,
                amount: amount,
                description: document.getElementById('description').value
            };
            
            console.log('Submitting income:', data);
            
            // Show success message
            showSuccessMessage('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            
            // Reset form
            resetForm();
        }

        function submitExpenseTransaction() {
            const total = selectedItems.reduce((sum, item) => sum + item.total, 0);
            
            const data = {
                date: document.getElementById('date').value,
                type: 'expense',
                mainCategory: mainCategory.value,
                subCategory: subCategory.value,
                vendor: document.getElementById('vendor').value,
                amount: total,
                items: selectedItems,
                description: document.getElementById('description').value
            };
            
            console.log('Submitting expense:', data);
            
            // Show success message
            showSuccessMessage(`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ ${selectedItems.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
            
            // Reset form
            resetForm();
        }

        function showSuccessMessage(message) {
            // Create success notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in';
            notification.innerHTML = `
                <div class="flex items-center gap-2">
                    <span>‚úÖ</span>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function resetForm() {
            // Reset form fields
            document.getElementById('transaction-form').reset();
            
            // Set today's date again
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
            
            // Clear categories
            mainCategory.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å --</option>';
            subCategory.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢ --</option>';
            
            // Hide conditional sections
            incomeSection.classList.add('hidden');
            itemsSection.classList.add('hidden');
            vendorSection.classList.add('hidden');
            
            // Clear items
            selectedItems = [];
            updateItemsDisplay();
            
            // Reset emoji
            currentEmoji = 'üòä';
            updateEmojiDisplay();
        }

        // Utility Functions
        function changeMonth(month) {
            console.log('Changing month to:', month);
            // Here you would typically reload the page with new month data
        }

        function exportData(type) {
            console.log('Exporting data:', type);
            alert(`‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•${type === 'all' ? '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' : type === 'income' ? '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö' : '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢'}`);
        }

        function showMonthlySummary() {
            const summary = `üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2025
            
üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏ß‡∏°: 15,000.00 ‡∏ö‡∏≤‡∏ó
üí∏ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°: 8,500.00 ‡∏ö‡∏≤‡∏ó
üìä ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: 6,500.00 ‡∏ö‡∏≤‡∏ó
üìù ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: 24 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (‡∏Å‡∏≥‡πÑ‡∏£)
üìà ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö: 56.7%`;
            
            alert(summary);
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Add custom category functions
        document.getElementById('add-main-category-btn').addEventListener('click', function() {
            const categoryName = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏´‡∏°‡πà:');
            if (categoryName && categoryName.trim()) {
                const type = transactionType.value;
                if (!type) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô');
                    return;
                }
                
                // Add to category data
                if (!categoryData[type][categoryName]) {
                    categoryData[type][categoryName] = [];
                }
                
                // Add to select
                const option = document.createElement('option');
                option.value = categoryName;
                option.textContent = categoryName;
                mainCategory.appendChild(option);
                mainCategory.value = categoryName;
                
                alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å "${categoryName}" ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
            }
        });

        document.getElementById('add-sub-category-btn').addEventListener('click', function() {
            const main = mainCategory.value;
            if (!main) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô');
                return;
            }
            
            const categoryName = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà:');
            if (categoryName && categoryName.trim()) {
                const type = transactionType.value;
                
                // Add to category data
                categoryData[type][main].push(categoryName);
                
                // Add to select
                const option = document.createElement('option');
                option.value = categoryName;
                option.textContent = categoryName;
                subCategory.appendChild(option);
                subCategory.value = categoryName;
                
                alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢ "${categoryName}" ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
            }
        });

        document.getElementById('add-vendor-btn').addEventListener('click', function() {
            const vendorName = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà:');
            if (vendorName && vendorName.trim()) {
                const vendorSelect = document.getElementById('vendor');
                
                // Check if vendor already exists
                const existingOptions = Array.from(vendorSelect.options);
                const exists = existingOptions.some(option => option.value === vendorName);
                
                if (exists) {
                    alert('‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß');
                    return;
                }
                
                // Add new option
                const option = document.createElement('option');
                option.value = vendorName;
                option.textContent = vendorName;
                vendorSelect.appendChild(option);
                vendorSelect.value = vendorName;
                
                alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ "${vendorName}" ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
            }
        });

        // Responsive handling
        window.addEventListener('resize', function() {
            if (selectedItems.length > 0) {
                updateItemsDisplay();
            }
        });

        // Prevent zoom on iOS
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        });

        // Smooth scroll behavior
        document.documentElement.style.scrollBehavior = 'smooth';

        // Auto-save to localStorage (optional)
        function saveFormData() {
            const formData = {
                selectedItems: selectedItems,
                transactionType: transactionType.value,
                mainCategory: mainCategory.value,
                subCategory: subCategory.value,
                date: document.getElementById('date').value
            };
            
            try {
                localStorage.setItem('incomeExpenseForm', JSON.stringify(formData));
            } catch (e) {
                console.log('localStorage not available');
            }
        }

        function loadFormData() {
            try {
                const saved = localStorage.getItem('incomeExpenseForm');
                if (saved) {
                    const formData = JSON.parse(saved);
                    
                    // Restore form state if needed
                    if (formData.selectedItems && formData.selectedItems.length > 0) {
                        const restore = confirm('‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏∑‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');
                        if (restore) {
                            selectedItems = formData.selectedItems;
                            updateItemsDisplay();
                            
                            if (formData.transactionType) {
                                transactionType.value = formData.transactionType;
                                handleTransactionTypeChange();
                            }
                        } else {
                            localStorage.removeItem('incomeExpenseForm');
                        }
                    }
                }
            } catch (e) {
                console.log('localStorage not available');
            }
        }

        // Load saved form data on page load
        // loadFormData();

        // Save form data periodically
        setInterval(saveFormData, 30000); // Save every 30 seconds

        console.log('üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ Mobile App Initialized');
    </script>
</body>
</html>