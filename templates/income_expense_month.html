<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏î‡∏π‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ year_month }}</title>
  <script src="{{ url_for('static', filename='js/tailwind.min.js') }}"></script>
</head>
<body class="bg-gray-100 p-4 sm:p-6 text-gray-800 min-h-screen">
    <!-- Mobile Menu -->
    <div class="lg:hidden fixed top-0 left-0 w-full bg-white shadow-lg z-50">
        <div class="flex items-center justify-between p-4">
            <h1 class="text-xl font-bold text-gray-800">üìÜ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ year_month }}</h1>
            <button onclick="toggleMobileMenu()" class="text-gray-600 hover:text-gray-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden bg-white border-t">
            <a href="/index" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏≠‡∏ó‡∏µ</a>
            <a href="/income-expense" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
            <a href="/holidays" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üéâ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</a>
            <a href="/import-csv" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üìä ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
            <a href="/import-ot-csv" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">‚è∞ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡πÇ‡∏≠‡∏ó‡∏µ</a>
            <a href="/settings" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
            <div class="px-4 py-3 border-b">
                <span class="text-sm text-gray-500">üë§ {{ session.user_email }}</span>
            </div>
            <a href="/logout" class="block px-4 py-3 text-red-600 hover:bg-red-50">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
        </div>
    </div>

    <!-- Desktop Menu -->
    <div class="hidden lg:block fixed top-0 left-0 w-64 h-full bg-white shadow-lg">
        <div class="p-6">
            <h1 class="text-2xl font-bold text-gray-800 mb-8">üìä ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</h1>
            <nav class="space-y-2">
                <a href="/index" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏≠‡∏ó‡∏µ</a>
                <a href="/income-expense" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
                <a href="/holidays" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">üéâ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</a>
                <a href="/import-csv" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">üìä ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
                <a href="/import-ot-csv" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">‚è∞ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡πÇ‡∏≠‡∏ó‡∏µ</a>
            <a href="/settings" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
                </nav>
            <div class="mt-8 pt-6 border-t">
                <div class="px-4 py-2">
                    <span class="text-sm text-gray-500">üë§ {{ session.user_email }}</span>
                </div>
                <a href="/logout" class="block px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="lg:ml-64 pt-16 lg:pt-0">
        <div class="p-6">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-4">
    <h1 class="text-xl sm:text-2xl font-bold">üìÜ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ year_month }}</h1>
    <a href="{{ url_for('export_income_expense_month', category='all', year_month=year_month) }}"
       class="w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white px-4 py-3 sm:py-2 rounded shadow text-center text-sm sm:text-base font-semibold">
                      üì§ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å CSV
    </a>
  </div>

  <div class="bg-white rounded shadow overflow-hidden">
    <div class="overflow-x-auto">
    <table class="w-full table-auto text-sm">
      <thead class="bg-gray-200">
        <tr>
            <th class="px-3 py-3 text-xs sm:text-sm text-left">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th class="px-3 py-3 text-xs sm:text-sm text-left">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
            <th class="px-3 py-3 text-xs sm:text-sm text-left">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</th>
            <th class="px-3 py-3 text-xs sm:text-sm text-right">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
            <th class="px-3 py-3 text-xs sm:text-sm text-center">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
        </tr>
      </thead>
      <tbody>
        {% for r in records %}
        <tr class="border-t hover:bg-gray-50">
            <td class="px-3 py-3 text-xs sm:text-sm">{{ r['date'] }}</td>
            <td class="px-3 py-3 text-xs sm:text-sm">{{ r['description'] }}</td>
            <td class="px-3 py-3 text-xs sm:text-sm">{{ r['vendor'] or '-' }}</td>
            <td class="px-3 py-3 text-xs sm:text-sm text-right font-mono">{{ '{:,.2f}'.format(r['amount']) }}</td>
            <td class="px-3 py-3 text-center">
            {% if r['category'] == 'income' %}
                <span class="inline-block px-2 py-1 text-xs bg-green-100 text-green-700 rounded-full font-semibold">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</span>
            {% else %}
                <span class="inline-block px-2 py-1 text-xs bg-red-100 text-red-700 rounded-full font-semibold">üí∏ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
          {% if not records %}
          <tr>
            <td colspan="5" class="px-3 py-6 text-center text-gray-500 text-sm">
              ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ year_month }}
            </td>
          </tr>
          {% endif %}
      </tbody>
    </table>
    </div>
            </div>
        </div>
    </div>

    <script>
        // Mobile Menu Toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
    </script>
</body>
</html>
