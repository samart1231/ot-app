<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÇ‡∏≠‡∏ó‡∏µ</title>
  <script src="{{ url_for('static', filename='js/tailwind.min.js') }}"></script>
</head>
<body class="p-4 sm:p-8 bg-gray-100 text-gray-800 min-h-screen">

    <!-- Mobile Menu -->
    <div class="lg:hidden fixed top-0 left-0 w-full bg-white shadow-lg z-50">
        <div class="flex items-center justify-between p-4">
            <h1 class="text-xl font-bold text-gray-800">üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏≠‡∏ó‡∏µ</h1>
            <button onclick="toggleMobileMenu()" class="text-gray-600 hover:text-gray-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden bg-white border-t">
            <a href="/index" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏≠‡∏ó‡∏µ</a>
            <a href="/income-expense" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
            <a href="/holidays" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üéâ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</a>
            <a href="/import-csv" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">üìä ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
            <a href="/import-ot-csv" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">‚è∞ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡πÇ‡∏≠‡∏ó‡∏µ</a>
            <a href="/settings" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
            <div class="px-4 py-3 border-b">
                <span class="text-sm text-gray-500">üë§ {{ session.user_email }}</span>
            </div>
            <a href="/logout" class="block px-4 py-3 text-red-600 hover:bg-red-50">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
        </div>
    </div>

    <!-- Desktop Menu -->
    <div class="hidden lg:block fixed top-0 left-0 w-64 h-full bg-white shadow-lg">
        <div class="p-6">
            <h1 class="text-2xl font-bold text-gray-800 mb-8">üìä ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</h1>
            <nav class="space-y-2">
                <a href="/index" class="block px-4 py-3 bg-blue-100 text-blue-700 font-medium rounded-lg">üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏≠‡∏ó‡∏µ</a>
                <a href="/income-expense" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
                <a href="/holidays" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">üéâ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</a>
                <a href="/import-csv" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">üìä ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</a>
                <a href="/import-ot-csv" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">‚è∞ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡πÇ‡∏≠‡∏ó‡∏µ</a>
                <a href="/settings" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
            </nav>
            <div class="mt-8 pt-6 border-t">
                <div class="px-4 py-2">
                    <span class="text-sm text-gray-500">üë§ {{ session.user_email }}</span>
                </div>
                <a href="/logout" class="block px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="lg:ml-64 pt-16 lg:pt-0">
        <div class="p-6">
            <h1 class="text-2xl sm:text-3xl font-bold mb-6 text-center sm:text-left">üßÆ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÇ‡∏≠‡∏ó‡∏µ üïí</h1>


  <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å -->
  <form method="post" class="bg-white p-4 sm:p-6 rounded shadow mb-6">
    <div class="grid grid-cols-1 gap-4 mb-6">
      <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏° -->
      <div>
        <label for="work_date" class="block mb-2 font-semibold text-gray-700 text-sm sm:text-base">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ({{ work_start_time if work_start_time else '08:00' }})</label>
        <input type="date" id="work_date" name="work_date"
          class="w-full border rounded p-3 sm:p-2 text-base focus:ring-2 focus:ring-orange-400" required>
      </div>

      <!-- ‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î -->
      <div>
        <label for="end_time" class="block mb-2 font-semibold text-gray-700 text-sm sm:text-base">‚è∞ ‡∏ß‡∏±‡∏ô-‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</label>
        <input type="datetime-local" id="end_time" name="end_time"
          class="w-full border rounded p-3 sm:p-2 text-base focus:ring-2 focus:ring-orange-400" required>
      </div>
    </div>

    <div class="flex justify-center sm:justify-end">
      <button type="submit"
        class="w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-4 sm:py-3 text-lg font-semibold text-white bg-gradient-to-r from-orange-400 to-orange-600 rounded-full shadow-lg hover:from-orange-500 hover:to-orange-700 transition-all">
        <span class="text-2xl">‚ûï</span>
        <span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
      </button>
    </div>
  </form>
    <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô -->
    <div class="bg-white p-4 sm:p-6 rounded shadow mb-6">
      <h2 class="text-lg sm:text-xl font-semibold mb-4">üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π</h2>
      <form method="get" class="flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4">
        <label for="month" class="font-semibold text-sm sm:text-base">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</label>
        <select name="month" id="month" onchange="this.form.submit()" 
                class="p-3 sm:p-2 border rounded text-base focus:ring-2 focus:ring-blue-400">
          {% for month_data in available_months %}
            <option value="{{ month_data['month'] }}" 
                    {% if selected_month == month_data['month'] %}selected{% endif %}>
              {{ month_data['display'] }}{% if month_data['has_data'] %} ‚úÖ{% else %} ‚≠ï{% endif %}
            </option>
          {% endfor %}
        </select>
        
              <!-- ‡∏ã‡πà‡∏≠‡∏ô parameters ‡∏≠‡∏∑‡πà‡∏ô‡πÜ -->
      <input type="hidden" name="sort" value="{{ sort_order }}">
        
        <div class="text-sm text-gray-600">
          ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OT ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ selected_month }}
        </div>
        
        <div class="text-xs text-gray-500 mt-2">
          <span class="mr-4">‚úÖ = ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
          <span>‚≠ï = ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
        </div>
      </form>
    </div>


  <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OT ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ selected_month }} -->
  <div class="bg-white rounded shadow mb-6">
    <div class="p-4 sm:p-6 border-b">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3">
        <h2 class="text-lg sm:text-xl font-semibold">üìä ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ OT ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ selected_month }}</h2>
                 <div class="text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full font-semibold">
           {{ total_records }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ | ‡∏£‡∏ß‡∏°: {{ monthly_total_ot }} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
         </div>
      </div>
    </div>
    
    <div class="overflow-x-auto">
      <table class="w-full table-auto text-sm">
    <thead class="bg-gray-200 text-left">
      <tr>
            <th class="px-3 py-3 text-xs sm:text-sm">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th class="px-3 py-3 text-xs sm:text-sm">‡πÄ‡∏£‡∏¥‡πà‡∏°</th>
            <th class="px-3 py-3 text-xs sm:text-sm">‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</th>
            <th class="px-3 py-3 text-xs sm:text-sm">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á OT</th>
            <th class="px-3 py-3 text-xs sm:text-sm">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
      </tr>
    </thead>
    <tbody>
      {% for r in records %}
      <tr class="border-t hover:bg-gray-50">
          <td class="px-3 py-3 text-xs sm:text-sm">{{ r['work_date'] }}</td>
          <td class="px-3 py-3 text-xs sm:text-sm">{{ r['start_time'][11:16] }}</td>
          <td class="px-3 py-3 text-xs sm:text-sm">{{ r['end_time'][11:16] }}</td>
          <td class="px-3 py-3 text-xs sm:text-sm">{{ r['ot_hours'] }}</td>
          <td class="px-3 py-3">
            <div class="flex flex-col sm:flex-row gap-1 sm:gap-2">
            <form action="{{ url_for('edit_ot', id=r['id']) }}" method="get">
                <button type="submit" class="w-full sm:w-auto px-2 py-1 text-xs sm:text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600">
    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
  </button>
</form>
              <button class="delete-btn w-full sm:w-auto px-2 py-1 text-xs sm:text-sm bg-red-600 text-white rounded hover:bg-red-700"
                      data-id="{{ r['id'] }}" 
                      data-date="{{ r['work_date'] }}" 
                      data-start="{{ r['start_time'][11:16] }}" 
                      data-end="{{ r['end_time'][11:16] }}" 
                      data-hours="{{ r['ot_hours'] }}">
            ‡∏•‡∏ö
          </button>
          <form id="delete-form-{{ r['id'] }}" method="post" action="{{ url_for('delete', id=r['id']) }}"></form>
            </div>
        </td>
      </tr>
      {% endfor %}
        {% if not records %}
        <tr>
          <td colspan="5" class="px-3 py-6 text-center text-gray-500">
            <div class="py-8">
              <div class="text-4xl mb-4">üì≠</div>
              <div class="text-lg font-medium mb-2">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OT ‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ selected_month }}</div>
              <div class="text-sm text-gray-400">
                ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå ‚úÖ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OT ‡πÉ‡∏´‡∏°‡πà
              </div>
            </div>
          </td>
        </tr>
        {% endif %}
    </tbody>
  </table>
    </div>
  </div>

  <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -->
  {% if records %}
  <div class="text-center text-sm text-gray-600 my-4">
    ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• OT ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î {{ total_records }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ selected_month }}
  </div>
  {% endif %}

  <!-- ‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô -->
  <h2 class="mt-6 text-lg sm:text-xl font-semibold text-center sm:text-left">‡∏£‡∏ß‡∏° OT ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h2>
  <div class="overflow-x-auto mt-2 bg-white shadow rounded">
    <table class="w-full table-auto text-sm">
  <thead class="bg-gray-200 text-left">
    <tr>
          <th class="px-3 py-3 text-xs sm:text-sm">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th>
          <th class="px-3 py-3 text-xs sm:text-sm">‡∏£‡∏ß‡∏° OT (‡∏ä‡∏°.)</th>
          <th class="px-3 py-3 text-xs sm:text-sm">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å</th>
    </tr>
  </thead>
  <tbody>
    {% for m in monthly_ot %}
    <tr class="border-t hover:bg-gray-50">
          <td class="px-3 py-3">
        <form action="{{ url_for('month_view', year_month=m['month']) }}" method="get">
              <button type="submit" class="w-full sm:w-auto text-white bg-blue-600 hover:bg-blue-700 px-2 py-1 text-xs sm:text-sm rounded">
            {{ m['month'] }}
          </button>
        </form>
      </td>
          <td class="px-3 py-3 text-xs sm:text-sm">{{ m['total'] | round(2) }}</td>
          <td class="px-3 py-3">
        <a href="{{ url_for('export_month_csv', year_month=m['month']) }}"
               class="inline-block w-full sm:w-auto text-center text-xs sm:text-sm px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700">
          üì• ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
  </div>

  <!-- ‡∏™‡∏£‡∏∏‡∏õ OT -->
  <div class="mt-6 bg-white p-4 sm:p-6 rounded shadow">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-center sm:text-left">
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-2">üìä ‡∏™‡∏£‡∏∏‡∏õ OT ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {{ selected_month }}</h3>
        <p class="text-2xl sm:text-3xl font-bold text-blue-700">{{ monthly_total_ot }} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
      </div>
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-2">üéØ ‡∏£‡∏ß‡∏° OT ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
        <p class="text-2xl sm:text-3xl font-bold text-green-700">{{ total_ot }} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
      </div>
    </div>
  </div>

  <!-- Modal ‡∏•‡∏ö -->
  <div id="delete-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 p-4">
    <div class="bg-white p-4 sm:p-6 rounded shadow max-w-md w-full mx-4">
      <h2 class="text-lg sm:text-xl font-bold mb-4 text-center">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ OT</h2>
      <div class="overflow-x-auto mb-4">
        <table class="w-full text-xs sm:text-sm border">
        <thead class="bg-gray-100">
          <tr>
              <th class="px-2 py-2 text-xs">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
              <th class="px-2 py-2 text-xs">‡πÄ‡∏£‡∏¥‡πà‡∏°</th>
              <th class="px-2 py-2 text-xs">‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</th>
              <th class="px-2 py-2 text-xs">OT</th>
          </tr>
        </thead>
        <tbody>
          <tr>
              <td class="px-2 py-2 text-xs" id="del-date"></td>
              <td class="px-2 py-2 text-xs" id="del-start"></td>
              <td class="px-2 py-2 text-xs" id="del-end"></td>
              <td class="px-2 py-2 text-xs" id="del-hours"></td>
          </tr>
        </tbody>
      </table>
      </div>
      <p class="mb-3 text-sm text-center">‡∏û‡∏¥‡∏°‡∏û‡πå <strong>yes</strong> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö:</p>
      <input type="text" id="confirm-input" class="w-full border p-3 rounded mb-4 text-base">
      <div class="flex flex-col sm:flex-row justify-end gap-2">
        <button onclick="hideModal()" class="w-full sm:w-auto px-4 py-3 bg-gray-300 rounded text-base">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button onclick="confirmDelete()" class="w-full sm:w-auto px-4 py-3 bg-red-600 text-white rounded text-base">‡∏•‡∏ö‡∏à‡∏£‡∏¥‡∏á</button>
      </div>
    </div>
  </div>

  <!-- JS Modal -->
  <script>
    let pendingId = null;
    
    // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡πÅ‡∏•‡∏∞ dropdown menu
    document.addEventListener('DOMContentLoaded', function() {
      // ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö OT
      document.querySelectorAll('.delete-btn').forEach(button => {
        button.addEventListener('click', function() {
          const id = this.dataset.id;
          const date = this.dataset.date;
          const start = this.dataset.start;
          const end = this.dataset.end;
          const hours = this.dataset.hours;
          showModal(id, date, start, end, hours);
        });
      });
      
      // Dropdown menu
      const menuButton = document.getElementById('menu-button');
      const dropdownMenu = document.getElementById('dropdown-menu');
      const menuArrow = document.getElementById('menu-arrow');
      
      // ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î dropdown ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°
      menuButton.addEventListener('click', function(e) {
        e.stopPropagation();
        const isHidden = dropdownMenu.classList.contains('hidden');
        
        if (isHidden) {
          dropdownMenu.classList.remove('hidden');
          menuArrow.style.transform = 'rotate(180deg)';
        } else {
          dropdownMenu.classList.add('hidden');
          menuArrow.style.transform = 'rotate(0deg)';
        }
      });
      
      // ‡∏õ‡∏¥‡∏î dropdown ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π
      document.addEventListener('click', function() {
        dropdownMenu.classList.add('hidden');
        menuArrow.style.transform = 'rotate(0deg)';
      });
      
      // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î dropdown ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π
      dropdownMenu.addEventListener('click', function(e) {
        e.stopPropagation();
      });
    });
    
    function showModal(id, date, start, end, hours) {
      pendingId = id;
      document.getElementById('confirm-input').value = '';
      document.getElementById('del-date').innerText = date;
      document.getElementById('del-start').innerText = start;
      document.getElementById('del-end').innerText = end;
      document.getElementById('del-hours').innerText = hours;
      document.getElementById('delete-modal').classList.remove('hidden');
    }

    function hideModal() {
      document.getElementById('delete-modal').classList.add('hidden');
      pendingId = null;
    }

    function confirmDelete() {
      const input = document.getElementById('confirm-input').value.trim().toLowerCase();
      if (input.toLowerCase() === 'yes' || input.toLowerCase() === 'y') {
  document.getElementById(`delete-form-${pendingId}`).submit();
} else {
        alert("‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå 'yes' ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏•‡∏ö‡πÑ‡∏î‡πâ");
      }
    }
  </script>
        </div>
    </div>

    <script>
        // Mobile Menu Toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
    </script>
</body>
</html>
